<html lang="en">

<head>
    <title>HTML Practice</title>
</head>

<body>

    <body>
        <form id="myForm" action="https://wp.zybooks.com/form-viewer.php" target="_blank" method="GET">

            <p>
                <label for="first">First Name:</label>
                <input type="text" name="first" id="first">
                <span id="nameError" class="error"></span>
            </p>
            <p>
                <label for="email">Email:</label>
                <input type="text" name="email" id="email">
                <span id="emailError" class="error"></span>
            </p>
            <p>
                <label for="number">Phone Number:</label>
                <input type="text" name="number" id="number">
                <span id="numberError" class="error"></span>
            </p>
            <p>
                <label for="number">Number of additional family members:</label>
                <input type="number" name="number" id="number" placeholder="0" min="0">
            </p>
            <input type="submit">
        </form>
        <script>

            document.addEventListener('DOMContentLoaded', function () {
                document.getElementById('first').value = localStorage.getItem('s_name') || '';
                document.getElementById('email').value = localStorage.getItem('s_email') || '';
                document.getElementById('number').value = localStorage.getItem('s_num') || '';
            });

            document.getElementById('myForm').addEventListener('submit', function (event) {
                event.preventDefault();

                let nameEr = document.getElementById('nameError');
                let emailEr = document.getElementById('emailError');
                let numEr = document.getElementById('numberError');

                var name = document.getElementById('first').value.trim();
                var email = document.getElementById('email').value.trim();
                var number = document.getElementById('number').value.trim();

                // Clear previous error messages
                nameEr.innerHTML = '';
                emailEr.innerHTML = '';
                numEr.innerHTML = '';

                // Validation
                var isValid = true;

                if (name === '') {
                    nameEr.innerHTML = 'Name is required';
                    isValid = false;
                }

                else {
                    localStorage.setItem("s_name", name);
                }

                if (email === '') {
                    emailEr.innerHTML = 'Email is invalid';
                    isValid = false;
                }
                else {
                    localStorage.setItem("s_email", email);
                }


                if (number === '') {
                    numEr.innerHTML = 'Phone Number is invalid';
                    isValid = false;
                }

                else {
                    localStorage.setItem("s_num", number);
                }


                // Submit the form if valid
                if (isValid) {
                    this.submit();
                }
            });
        </script>

    </body>
</body>

</html>